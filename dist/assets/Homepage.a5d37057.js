import{_ as T}from"./ShowRating.162a660a.js";import{r as j,o as r,c as i,a as u,w as p,b as a,t as y,_ as z,F as k,d as S,e as E,f as _,u as R,g as l,h as s,n as N,i as x}from"./index.5123f132.js";const O={class:"rounded-t-md overflow-hidden"},V=["src","alt"],G={class:"bg-[#222] rounded-b-md px-4 py-2"},H={class:"clip-text hover:text-white"},M=a("div",{class:"bg-[#333] rounded-md px-2 xl:px-4 text-center py-1 my-2 hover:bg-[#444]"},[a("span",{class:"text-sm xl:text-base"},"Details")],-1),Q={__name:"ItemCard",props:{show:Object},setup(e){return(t,d)=>{const o=j("router-link");return r(),i("div",null,[u(o,{to:{name:"Show",params:{id:e.show.id,slug:e.show.name.toLowerCase().replace(/\s|\W/g,"-")}}},{default:p(()=>[a("div",O,[a("img",{src:e.show.image.medium,alt:e.show.name,width:"210",height:"295",loading:"lazy",class:"aspect-[42/59] min-w-[130px] md:min-w-[160px] lg:min-w-[180px] xl:min-w-[210px] object-cover rounded-md \\ hover:scale-105 duration-300 opacity-80 hover:opacity-100"},null,8,V)])]),_:1},8,["to"]),a("div",G,[u(T,{rating:e.show.rating.average},null,8,["rating"]),u(o,{to:{name:"Show",params:{id:e.show.id,slug:e.show.name.toLowerCase().replace(/\s|\W/,"-")}}},{default:p(()=>[a("h3",H,y(e.show.name),1)]),_:1},8,["to"]),u(o,{to:{name:"Show",params:{id:e.show.id,slug:e.show.name.toLowerCase().replace(/\s|\W/,"-")}}},{default:p(()=>[M]),_:1},8,["to"])])])}}};const Y={class:"scroller flex overflow-x-scroll gap-x-4 py-4"},q={__name:"ItemList",props:{shows:Array},setup(e){return(t,d)=>(r(),i("span",Y,[(r(!0),i(k,null,S(e.shows,o=>(r(),E(Q,{show:o},null,8,["show"]))),256))]))}};var J=z(q,[["__scopeId","data-v-68a4da8c"]]),C=()=>Math.random()-.5;const K=(e,t)=>e.genres.includes(t),P=(e,t)=>t.rating.average-e.rating.average,c=(e,t)=>{if(!!(e!=null&&e.length))return t&&(e=e.filter(d=>K(d,t))),e.sort(P).slice(0,20).sort(C)},$=_(null),W=_([]),U=async()=>{let e=0,t=[],d=!0;for(;d;)try{const m=await(await fetch(`https://api.tvmaze.com/shows?page=${e}`)).json();m.length||(d=!1);const w=m.filter(n=>n.rating.average>1&&n.rating.average<4).sort((n,h)=>n.rating.average-h.rating.average).slice(0,3);t=[...t,...w].sort((n,h)=>n.rating.average-h.rating.average).slice(0,20).sort(C),e+=1}catch(o){$.value=o.message}return W.value=t};function X(){return{error:$,worstShows:W,getWorstShows:U}}const Z={class:"space-y-4 pt-4"},ee={key:0,class:"space-y-1"},te=a("p",null,"Ever wondered what we all consider the worst shows of all time? It just so happens that I can show you!",-1),se=a("p",null,"It does take a few seconds, though. Querying over 60.000 shows in the database can do that for you!",-1),ae={key:0},ce={__name:"Homepage",setup(e){const{data:t,error:d}=R("https://api.tvmaze.com/shows"),{error:o,worstShows:m,getWorstShows:w}=X(),n=l(()=>{console.log("computed runt"),c(t.value)}),h=l(()=>c(t.value,"Action")),L=l(()=>c(t.value,"Comedy")),F=l(()=>c(t.value,"Crime")),I=l(()=>c(t.value,"Drama")),A=l(()=>c(t.value,"Romance")),B=l(()=>c(t.value,"Action")),D=l(()=>c(t.value,"Thriller")),g=_(!1);return(oe,f)=>(r(),i("div",Z,[(r(!0),i(k,null,S([["Featured",s(n)],["Drama",s(I)],["Action",s(h)],["Crime",s(F)],["Comedy",s(L)],["Romance",s(A)],["Science Fiction",s(B)],["Thriller",s(D)],["Worst Shows Of All Time",s(m)]],([b,v])=>(r(),i("section",null,[a("h2",null,y(b),1),b==="Worst Shows Of All Time"&&!v.length?(r(),i("div",ee,[te,se,a("button",{onClick:f[0]||(f[0]=re=>{s(w)(),g.value=!0}),class:N(["bg-[#333] font-semibold rounded-full px-4 py-2 hover:bg-[#444]",{"cursor-not-allowed animate-pulse":g.value}])}," Yes, Load Worst Shows! ",2),g.value&&!v.length?(r(),i("p",ae,"Loading worst shows, hang on a few seconds!")):x("",!0)])):x("",!0),u(J,{shows:v},null,8,["shows"])]))),256))]))}};export{ce as default};
